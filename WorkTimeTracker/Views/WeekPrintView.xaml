<UserControl x:Class="WorkTimeTracker.Views.WeekPrintView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Iets ruimere marge rond de inhoud -->
    <Grid Margin="40">
        <Grid.RowDefinitions>
            <!-- Naam -->
            <RowDefinition Height="Auto"/>
            <!-- Week header -->
            <RowDefinition Height="Auto"/>
            <!-- Tabel -->
            <RowDefinition Height="Auto"/>
            <!-- Footer -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- NAAM -->
        <TextBlock Grid.Row="0"
                   Text="{Binding UserName, RelativeSource={RelativeSource AncestorType=UserControl}}"
                   FontSize="18"
                   FontWeight="Bold"
                   Margin="0,0,0,2"/>

        <!-- WEEK-TITEL -->
        <TextBlock Grid.Row="1"
                   Text="{Binding HeaderText, RelativeSource={RelativeSource AncestorType=UserControl}}"
                   FontSize="14"
                   Margin="0,0,0,8"/>

        <!-- TABEL MET 7 DAGEN -->
        <DataGrid Grid.Row="2"
                  Margin="0,0,0,4"
                  ItemsSource="{Binding Dagen, RelativeSource={RelativeSource AncestorType=UserControl}}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserResizeColumns="False"
                  HeadersVisibility="Column"
                  RowHeaderWidth="0"
                  SelectionMode="Single"
                  SelectionUnit="Cell"
                  IsReadOnly="True"
                  Style="{StaticResource MaterialDesignDataGrid}"
                  Background="#FBFBFB"
                  FontSize="14"
                  GridLinesVisibility="Horizontal">

            <!-- Rij-stijl: iets subtielere highlight voor niet-normale dagen -->
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow" BasedOn="{StaticResource MaterialDesignDataGridRow}">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="MinHeight" Value="45"/>

                    <Style.Triggers>
                        <!-- Geen selectie-highlight -->
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="BorderBrush" Value="Transparent"/>
                        </Trigger>

                        <!-- Niet-normale dag: lichte achtergrond, semi-bold, cursief -->
                        <DataTrigger Binding="{Binding IsNormaleWerkdag}" Value="False">
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="FontStyle"  Value="Italic"/>
                            <Setter Property="Background" Value="#FFF1F5F9"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>

            <!-- Cells: geen focus-/selectie-randjes nodig op print -->
            <DataGrid.CellStyle>
                <Style TargetType="DataGridCell" BasedOn="{StaticResource MaterialDesignDataGridCell}">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="BorderBrush" Value="Transparent"/>
                    <Setter Property="Focusable" Value="False"/>
                    <Setter Property="IsTabStop" Value="False"/>

                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="BorderBrush" Value="Transparent"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.CellStyle>

            <!-- Kolommen -->
            <DataGrid.Columns>

                <!-- KOLOM 1: dag + datum -->
                <DataGridTextColumn Header="Dag"
                                    Width="Auto"
                                    MinWidth="150"
                                    FontWeight="Bold"
                                    FontSize="16"
                                    Binding="{Binding DagEnDatum}"/>

                <!-- KOLOM 2: Tijd (Start - Eind, alleen bij normale werkdag) -->
                <DataGridTemplateColumn Header="Tijd" Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel x:Name="TijdPanel"
                                        Orientation="Horizontal"
                                        HorizontalAlignment="Center">
                                <TextBlock Text="{Binding StartTijd, StringFormat='hh\\:mm'}"
                                           FontSize="14"
                                           FontWeight="SemiBold"/>
                                <TextBlock Text=" - "
                                           Margin="2,0"
                                           FontSize="14"
                                           FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding EindTijd, StringFormat='hh\\:mm'}"
                                           FontSize="14"
                                           FontWeight="SemiBold"/>
                            </StackPanel>

                            <DataTemplate.Triggers>
                                <!-- Geen tijd tonen als het geen normale werkdag is -->
                                <DataTrigger Binding="{Binding IsNormaleWerkdag}" Value="False">
                                    <Setter TargetName="TijdPanel" Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>

                                <!-- Safety: geen tijd tonen als start of eind ontbreekt -->
                                <DataTrigger Binding="{Binding StartTijd}" Value="{x:Null}">
                                    <Setter TargetName="TijdPanel" Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding EindTijd}" Value="{x:Null}">
                                    <Setter TargetName="TijdPanel" Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- KOLOM 3: Project -->
                <DataGridTemplateColumn Header="Project" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Projectnaam}"
                                       TextTrimming="CharacterEllipsis"
                                       FontSize="14">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsNormaleWerkdag}" Value="True">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- KOLOM 4: Extra info / Dagtype -->
                <DataGridTemplateColumn Header="Extra informatie" Width="2*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <!-- Normale werkdag: extra info -->
                                <TextBlock x:Name="ExtraText"
                                           Text="{Binding ExtraInformatie}"
                                           TextTrimming="CharacterEllipsis"
                                           FontSize="14"/>

                                <!-- Niet-normale dag: statustekst -->
                                <TextBlock x:Name="StatusLabel"
                                           Text="{Binding StatusLabel}"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="18"
                                           FontWeight="SemiBold"
                                           FontStyle="Italic"
                                           Foreground="#FF4B5563"
                                           Opacity="0.9"
                                           Visibility="Collapsed"/>
                            </Grid>

                            <DataTemplate.Triggers>
                                <!-- Normale werkdag -->
                                <DataTrigger Binding="{Binding IsNormaleWerkdag}" Value="True">
                                    <Setter TargetName="ExtraText"   Property="Visibility" Value="Visible"/>
                                    <Setter TargetName="StatusLabel" Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>

                                <!-- Niet-normale werkdag -->
                                <DataTrigger Binding="{Binding IsNormaleWerkdag}" Value="False">
                                    <Setter TargetName="ExtraText"   Property="Visibility" Value="Collapsed"/>
                                    <Setter TargetName="StatusLabel" Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- KOLOM 5: Locatie -->
                <DataGridTemplateColumn Header="Locatie" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Locatie}"
                                       TextTrimming="CharacterEllipsis"
                                       FontSize="14">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsNormaleWerkdag}" Value="True">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- KOLOM 6: Dag-uren (zoals in de app) -->
                <DataGridTemplateColumn Header="Uren" Width="70">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock 
                                x:Name="UrenText"
                                Text="{Binding GewerkteUren, StringFormat={}{0:F2} u}"
                                HorizontalAlignment="Right"
                                FontSize="14">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <!-- standaard niets tonen -->
                                        <Setter 
                                            Property="Visibility" 
                                            Value="Collapsed" />
                                        <Style.Triggers>
                                            <!-- Alleen tonen op normale werkdagen -->
                                            <DataTrigger Binding="{Binding IsNormaleWerkdag}" Value="True">
                                                <Setter Property="Visibility" Value="Visible" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- FOOTER: direct onder de tabel -->
        <Grid Grid.Row="3"
              Margin="0,6,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="1"
                        Orientation="Vertical"
                        HorizontalAlignment="Right">

                <!-- Totaal overuren -->
                <TextBlock 
                    Text="{Binding OverurenTekst, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    FontSize="18"
                    FontWeight="Bold"
                    HorizontalAlignment="Right"
                    Margin="0,20,40,0"/>

                <!-- Paginanummering -->
                <TextBlock 
                    Text="{Binding PageText, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    FontSize="11"
                    Foreground="#FF6B7280"
                    HorizontalAlignment="Right"
                    Margin="0,2,0,0">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding PageText, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding PageText, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="{x:Null}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding PageText, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="{x:Static sys:String.Empty}"
                                             xmlns:sys="clr-namespace:System;assembly=mscorlib">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <!-- Anders: tonen -->
                                <DataTrigger Binding="{Binding PageText, RelativeSource={RelativeSource AncestorType=UserControl}}">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
